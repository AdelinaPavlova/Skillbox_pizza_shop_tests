{"name": "Проверка невозможности применить купон дважды на одном аккаунте", "status": "failed", "statusDetails": {"message": "AssertionError: assert 405 == 450\n +  where 405 = total_price()\n +    where total_price = <final.pages.cart_page.CartPage object at 0x000002495C617F10>.total_price\n +  and   450 = pizza_price()\n +    where pizza_price = <final.pages.cart_page.CartPage object at 0x000002495C617F10>.pizza_price", "trace": "self = <tests.test_promo.TestPromo object at 0x000002495C105AF0>\npage = <Page url='http://pizzeria.skillbox.cc/cart/'>\n\n    @allure.title(\"Проверка невозможности применить купон дважды на одном аккаунте\")\n    def test_one_coupon(self, page):\n        account_page = AccountPage(page)\n        cart_page = CartPage(page)\n        cookie_handler = CookieHandler(page)\n        order_page = OrderPage(page)\n        card_main = MainPage(page)\n        account_page.open()\n        account_page.login()\n        cookie_handler.add_item_cookies()\n        cart_page.open_cart()\n        cart_page.coupon_insert(coupon=\"GIVEMEHALYAVA\")\n        order_page.open()\n        order_page.send_data()\n        order_page.payment()\n        order_page.submit()\n        card_main.open()\n        card_main.pizza_ham_card_button.click()\n        time.sleep(1)\n        cart_page.open_cart()\n        cart_page.coupon_insert(coupon=\"GIVEMEHALYAVA\")\n        with allure.step(\"Проверка, что промокод не применился во второй раз\"):\n>           assert cart_page.total_price() == cart_page.pizza_price()\nE           assert 405 == 450\nE            +  where 405 = total_price()\nE            +    where total_price = <final.pages.cart_page.CartPage object at 0x000002495C617F10>.total_price\nE            +  and   450 = pizza_price()\nE            +    where pizza_price = <final.pages.cart_page.CartPage object at 0x000002495C617F10>.pizza_price\n\ntest_promo.py:72: AssertionError"}, "steps": [{"name": "Загрузка cookies из файла", "status": "passed", "start": 1732967045198, "stop": 1732967045199}, {"name": "Открытие страницы 'http://pizzeria.skillbox.cc/my-account/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/my-account/'"}], "start": 1732967045200, "stop": 1732967045941}, {"name": "Вход в аккаунт...", "status": "passed", "parameters": [{"name": "username", "value": "'user_24_name'"}, {"name": "password", "value": "'password'"}], "start": 1732967045941, "stop": 1732967048904}, {"name": "Добавление cookies", "status": "passed", "steps": [{"name": "Открытие страницы корзины 'http://pizzeria.skillbox.cc/cart/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/cart/'"}], "start": 1732967048904, "stop": 1732967049121}, {"name": "Добавление cookies", "status": "passed", "start": 1732967049183, "stop": 1732967049183}], "start": 1732967048904, "stop": 1732967049409}, {"name": "Открытие страницы корзины 'http://pizzeria.skillbox.cc/cart/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/cart/'"}], "start": 1732967049409, "stop": 1732967049615}, {"name": "Добавление купона", "status": "passed", "steps": [{"name": "Добавление в строку текста GIVEMEHALYAVA", "status": "passed", "start": 1732967049615, "stop": 1732967049691}, {"name": "Нажатие кнопки добавление купона", "status": "passed", "start": 1732967049691, "stop": 1732967049796}], "parameters": [{"name": "coupon", "value": "'GIVEMEHALYAVA'"}], "start": 1732967049615, "stop": 1732967050799}, {"name": "Открытие страницы 'http://pizzeria.skillbox.cc/checkout/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/checkout/'"}], "start": 1732967050799, "stop": 1732967052100}, {"name": "Подстановка данных в формы", "status": "passed", "parameters": [{"name": "data", "value": "None"}], "start": 1732967052100, "stop": 1732967055588}, {"name": "Выбор оплаты при получении", "status": "passed", "start": 1732967055588, "stop": 1732967055656}, {"name": "Подтверждение данных", "status": "passed", "start": 1732967055656, "stop": 1732967058022}, {"name": "Открытие страницы 'http://pizzeria.skillbox.cc/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/'"}], "start": 1732967058022, "stop": 1732967058261}, {"name": "Открытие страницы корзины 'http://pizzeria.skillbox.cc/cart/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/cart/'"}], "start": 1732967062402, "stop": 1732967062582}, {"name": "Добавление купона", "status": "passed", "steps": [{"name": "Добавление в строку текста GIVEMEHALYAVA", "status": "passed", "start": 1732967062582, "stop": 1732967062640}, {"name": "Нажатие кнопки добавление купона", "status": "passed", "start": 1732967062640, "stop": 1732967062714}], "parameters": [{"name": "coupon", "value": "'GIVEMEHALYAVA'"}], "start": 1732967062582, "stop": 1732967063716}, {"name": "Проверка, что промокод не применился во второй раз", "status": "failed", "statusDetails": {"message": "AssertionError: assert 405 == 450\n +  where 405 = total_price()\n +    where total_price = <final.pages.cart_page.CartPage object at 0x000002495C617F10>.total_price\n +  and   450 = pizza_price()\n +    where pizza_price = <final.pages.cart_page.CartPage object at 0x000002495C617F10>.pizza_price\n", "trace": "  File \"C:\\Users\\tanai\\PycharmProjects\\python-autotests-basic\\final\\tests\\test_promo.py\", line 72, in test_one_coupon\n    assert cart_page.total_price() == cart_page.pizza_price()\n"}, "steps": [{"name": "Получение итоговой стоимости корзины", "status": "passed", "start": 1732967063716, "stop": 1732967063751}, {"name": "Получение стоимости пиццы в корзине", "status": "passed", "start": 1732967063751, "stop": 1732967063786}], "start": 1732967063716, "stop": 1732967063787}], "parameters": [{"name": "browser_name", "value": "'chromium'"}], "start": 1732967045197, "stop": 1732967063787, "uuid": "1e1a32c3-65c4-4632-ad2c-704c146e97a0", "historyId": "0c6557c0c13af0286f7027fc9ea511db", "testCaseId": "4365017ece1e67c700dd46b2dcab7e37", "fullName": "tests.test_promo.TestPromo#test_one_coupon", "labels": [{"name": "story", "value": "Promo assertion"}, {"name": "feature", "value": "Skillbox tests"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_promo"}, {"name": "subSuite", "value": "TestPromo"}, {"name": "host", "value": "MSI"}, {"name": "thread", "value": "22416-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_promo"}]}