{"name": "Проверка невозможности применить купон дважды на одном аккаунте", "status": "failed", "statusDetails": {"message": "AssertionError: assert 405 == 450\n +  where 405 = total_price()\n +    where total_price = <final.pages.cart_page.CartPage object at 0x000002D2B967A8B0>.total_price\n +  and   450 = pizza_price()\n +    where pizza_price = <final.pages.cart_page.CartPage object at 0x000002D2B967A8B0>.pizza_price", "trace": "self = <tests.test_promo.TestPromo object at 0x000002D2B92912E0>\npage = <Page url='http://pizzeria.skillbox.cc/cart/'>\n\n    @allure.title('Проверка невозможности применить купон дважды на одном аккаунте')\n    def test_one_coupon(self, page):\n        account_page = AccountPage(page)\n        cart_page = CartPage(page)\n        cookie_handler = CookieHandler(page)\n        order_page = OrderPage(page)\n        card_main = MainPage(page)\n        account_page.open()\n        account_page.login()\n        cookie_handler.add_item_cookies()\n        cart_page.open_cart()\n        cart_page.coupon_insert(coupon=\"GIVEMEHALYAVA\")\n        order_page.open()\n        order_page.send_data()\n        order_page.payment()\n        order_page.submit()\n        card_main.open()\n        card_main.pizza_ham_card_button.click()\n        time.sleep(1)\n        cart_page.open_cart()\n        cart_page.coupon_insert(coupon=\"GIVEMEHALYAVA\")\n        with allure.step(\"Проверка, что промокод не применился во второй раз\"):\n>           assert cart_page.total_price() == cart_page.pizza_price()\nE           assert 405 == 450\nE            +  where 405 = total_price()\nE            +    where total_price = <final.pages.cart_page.CartPage object at 0x000002D2B967A8B0>.total_price\nE            +  and   450 = pizza_price()\nE            +    where pizza_price = <final.pages.cart_page.CartPage object at 0x000002D2B967A8B0>.pizza_price\n\ntest_promo.py:69: AssertionError"}, "steps": [{"name": "Загрузка cookies из файла", "status": "passed", "start": 1732726402316, "stop": 1732726402317}, {"name": "Открытие страницы 'http://pizzeria.skillbox.cc/my-account/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/my-account/'"}], "start": 1732726402317, "stop": 1732726403097}, {"name": "Вход в аккаунт...", "status": "passed", "parameters": [{"name": "username", "value": "'user_24_name'"}, {"name": "password", "value": "'password'"}], "start": 1732726403097, "stop": 1732726405755}, {"name": "Добавление cookies", "status": "passed", "steps": [{"name": "Открытие страницы корзины 'http://pizzeria.skillbox.cc/cart/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/cart/'"}], "start": 1732726405755, "stop": 1732726405965}, {"name": "Генерация новых cookies", "status": "passed", "steps": [{"name": "Открытие страницы продукта 'пицца-ветчина-и-грибы'", "status": "passed", "parameters": [{"name": "pizza", "value": "'пицца-ветчина-и-грибы'"}, {"name": "url", "value": "None"}], "start": 1732726406008, "stop": 1732726406365}, {"name": "Добавление в корзину", "status": "passed", "start": 1732726406365, "stop": 1732726406583}, {"name": "Сохранение cookies", "status": "passed", "start": 1732726406614, "stop": 1732726406615}], "start": 1732726406008, "stop": 1732726406615}, {"name": "Добавление cookies", "status": "passed", "start": 1732726406615, "stop": 1732726406615}], "start": 1732726405755, "stop": 1732726406862}, {"name": "Открытие страницы корзины 'http://pizzeria.skillbox.cc/cart/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/cart/'"}], "start": 1732726406862, "stop": 1732726407070}, {"name": "Добавление купона", "status": "passed", "steps": [{"name": "Добавление в строку текста GIVEMEHALYAVA", "status": "passed", "start": 1732726407070, "stop": 1732726407127}, {"name": "Нажатие кнопки добавление купона", "status": "passed", "start": 1732726407127, "stop": 1732726407213}], "parameters": [{"name": "coupon", "value": "'GIVEMEHALYAVA'"}], "start": 1732726407070, "stop": 1732726408224}, {"name": "Открытие страницы 'http://pizzeria.skillbox.cc/checkout/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/checkout/'"}], "start": 1732726408224, "stop": 1732726409561}, {"name": "Подстановка данных в формы", "status": "passed", "parameters": [{"name": "data", "value": "None"}], "start": 1732726409561, "stop": 1732726413010}, {"name": "Выбор оплаты при получении", "status": "passed", "start": 1732726413010, "stop": 1732726413071}, {"name": "Подтверждение данных", "status": "passed", "start": 1732726413071, "stop": 1732726415209}, {"name": "Открытие страницы 'http://pizzeria.skillbox.cc/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/'"}], "start": 1732726415209, "stop": 1732726415475}, {"name": "Открытие страницы корзины 'http://pizzeria.skillbox.cc/cart/'", "status": "passed", "parameters": [{"name": "url", "value": "'http://pizzeria.skillbox.cc/cart/'"}], "start": 1732726419631, "stop": 1732726419807}, {"name": "Добавление купона", "status": "passed", "steps": [{"name": "Добавление в строку текста GIVEMEHALYAVA", "status": "passed", "start": 1732726419807, "stop": 1732726419853}, {"name": "Нажатие кнопки добавление купона", "status": "passed", "start": 1732726419854, "stop": 1732726419938}], "parameters": [{"name": "coupon", "value": "'GIVEMEHALYAVA'"}], "start": 1732726419807, "stop": 1732726420946}, {"name": "Проверка, что промокод не применился во второй раз", "status": "failed", "statusDetails": {"message": "AssertionError: assert 405 == 450\n +  where 405 = total_price()\n +    where total_price = <final.pages.cart_page.CartPage object at 0x000002D2B967A8B0>.total_price\n +  and   450 = pizza_price()\n +    where pizza_price = <final.pages.cart_page.CartPage object at 0x000002D2B967A8B0>.pizza_price\n", "trace": "  File \"C:\\Users\\tanai\\PycharmProjects\\python-autotests-basic\\final\\tests\\test_promo.py\", line 69, in test_one_coupon\n    assert cart_page.total_price() == cart_page.pizza_price()\n"}, "steps": [{"name": "Получение итоговой стоимости корзины", "status": "passed", "start": 1732726420946, "stop": 1732726420958}, {"name": "Получение стоимости пиццы в корзине", "status": "passed", "start": 1732726420959, "stop": 1732726420973}], "start": 1732726420946, "stop": 1732726420973}], "parameters": [{"name": "browser_name", "value": "'chromium'"}], "start": 1732726402313, "stop": 1732726420973, "uuid": "3a031188-1891-4e4a-bad6-f7674148a7b7", "historyId": "0c6557c0c13af0286f7027fc9ea511db", "testCaseId": "4365017ece1e67c700dd46b2dcab7e37", "fullName": "tests.test_promo.TestPromo#test_one_coupon", "labels": [{"name": "story", "value": "Promo assertion"}, {"name": "feature", "value": "Skillbox tests"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_promo"}, {"name": "subSuite", "value": "TestPromo"}, {"name": "host", "value": "MSI"}, {"name": "thread", "value": "28388-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_promo"}]}